/*! FloraJSLeap v1.0.0 - 2013-08-04 12:08:00 
Vince Allen |Brooklyn, NY | vince@vinceallen.com | @vinceallenvince | License: MIT */
!function(a,b){function c(a,b){if(!a)throw new Error("StatusMessage requires a DOM element.");this.el=a,this.opacity=1,this.fade=!1,this.name="StatusMessage"}b.FloraJSLeap=a;var d={};d.subscribe=function(a,b){return this._callbacks||(this._callbacks={}),(this._callbacks[a]||(this._callbacks[a]=[])).push(b),this},d.publish=function(){var a,b,c,d,e=Array.prototype.slice.call(arguments,0),f=e.shift();if(!(b=this._callbacks))return this;if(!(a=this._callbacks[f]))return this;for(c=0,d=a.length;d>c;c+=1)a[c].apply(this,e);return this},c.prototype.displayMessage=function(a,b){this.el.innerHTML="Leap: <span class='emphasis'>"+a+"</span>",this.opacity=1,this.el.style.opacity=this.opacity,b||(this.fade=!0,this._update())},c.prototype._update=function(){this.opacity>0?this.opacity-=.005:(this.opacity=0,this.fade=!1),this.el.style.opacity=this.opacity,this.fade&&window.requestAnimFrame(this._update.bind(this))};var e=function(){if(!Leap)throw new Error("FloraJSLeap.init requires Leapjs.");var b=document.createElement("div");b.id="statusMessage",b.className="statusMessage",document.body.appendChild(b);var c=new a.StatusMessage(document.getElementById("statusMessage"));c.displayMessage("Please connect a Leap motion device.",!0),a.PubSub.subscribe("ready",c.displayMessage.bind(c,"ready")),a.PubSub.subscribe("disconnect",c.displayMessage.bind(c,"disconnected",!0)),a.PubSub.subscribe("blur",c.displayMessage.bind(c,"blur")),a.PubSub.subscribe("deviceConnected",c.displayMessage.bind(c,"deviceConnected")),a.PubSub.subscribe("deviceDisconnected",c.displayMessage.bind(c,"deviceDisconnected",!0)),a.PubSub.subscribe("active",c.displayMessage.bind(c,"active"));var d=new Leap.Controller({enableGestures:!0});return d.on("ready",function(){a.PubSub.publish("ready")}),d.on("connect",function(){a.PubSub.publish("connect")}),d.on("disconnect",function(){a.PubSub.publish("disconnect")}),d.on("focus",function(){a.PubSub.publish("focus")}),d.on("blur",function(){a.PubSub.publish("blur")}),d.on("deviceConnected",function(){a.PubSub.publish("deviceConnected")}),d.on("deviceDisconnected",function(){a.PubSub.publish("deviceDisconnected")}),d.connect(),d};a.PubSub=d,a.StatusMessage=c,a.init=e}({},function(){return this}());